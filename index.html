<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Geometry Collector</title>
    <link href="https://fonts.googleapis.com/css?family=Acme" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <main class="container">    
        
        <img src="assets/images/island2.png" alt="Lava Island" height="400px" width="400px" class="background-img left-corner hvr-bob1">
        <img src="assets/images/island1.png" alt="Clean Island" height="400px" width="400px" class="background-img right-corner hvr-bob2">


        <div class="row valign-wrapper justify-content-center my-0">
            <div class="center title">
                <h2>Geometric Animal Collector</h2>
                <button class="btn btn-dark" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                        Instructions
                    </button>
            
                <div class="collapse" id="collapseExample">
                    <div class="card card-body">
                    Each animal represents a random number, and clicking an animal will raise your total score by that random number. The objective is to get your total score to match the target number without going over it. If your total score exceeds the target number, you will lose the game.
                    </div>
                 </div>
            
            </div>
        </div>

        <div class="score-keeper">
            <div id="win-display"></div>
            <br>
            <div id="lose-display"></div>
        </div>

        <div class="row justify-content-center m-0">
                <div>
                    <h4 class="target-number">.target-number</h4>
                </div>
        </div>

        <div class="row justify-content-center m-0">
                <div class="col s4 center">
                    <img src="assets/images/panda.png" alt="Panda" height="150px" width="150px" class="panda hvr-buzz">
                </div>
                <div class="col s4 center">
                    <img src="assets/images/wolf.png" alt="Wolf" height="150px" width="150px" class="wolf hvr-buzz">
                </div>
        </div>

        <div class="row justify-content-center m-0">
            <div class="center total-score valign-wrapper hvr-buzz-on">
                <h4 class="total-number">.total-number</h4>
            </div>
        </div>

        <div class="row justify-content-center m-0">
            <div class="col s4 center">
                <img src="assets/images/deer.png" alt="Deer" height="150px" width="150px" class="deer hvr-buzz">
            </div>
            <div class="col s4 center">
                <img src="assets/images/bee.png" alt="Bee" height="150px" width="150px" class="bee hvr-buzz"> 
            </div>
        </div>


    </main>   
    <div>
            <h3 class="gameBanner center">Good luck!</h3>
    </div>


    <script>
    // Generates random number base on parameters
    function getRndInt(min, max) {
        return Math.floor(Math.random() * (max - min) ) + min;
        }
    
    // Assign random numbers to variables, set counters
    let targetNumber = getRndInt(19,121);
    let pandaNumber = getRndInt(1,13);
    let wolfNumber = getRndInt(1,13);
    let deerNumber = getRndInt(1,13);
    let beeNumber = getRndInt(1,13);
    let totalScore = 0;
    let winCount = 0;
    let lossCount = 0;
    

$(function() {

    // Function to check game status
    function checkWin() {
        if (totalScore === targetNumber) {
           $(".gameBanner").text("Nice job! You won!");
            winCount++;
            $("#win-display").text("Wins:   " + winCount).addClass('animated bounceInDown');
           
            resetGame();
            $(".gameBanner").addClass('animated bounceInDown win-color');

            setTimeout(function(){resetAnimation();}, 1000);

         }
        else if (totalScore > targetNumber) {
           $(".gameBanner").text("Too bad. You lost!");
           lossCount++;
           $("#lose-display").text("Losses: " + lossCount).addClass('animated bounceInDown');
          
           resetGame();
           $(".gameBanner").addClass('animated bounceInDown lose-color');

           setTimeout(function(){resetAnimation();}, 1000);
        }
    };

    // Function to reset game on win or lose, reassigns random numbers
    function resetGame() {
        totalScore = 0;
        targetNumber = getRndInt(19,121);
        pandaNumber = getRndInt(1,13);
        wolfNumber = getRndInt(1,13);
        deerNumber = getRndInt(1,13);
        beeNumber = getRndInt(1,13);
        $(".target-number").text("Target number: " + targetNumber).addClass('animated rotateInDownRight');;
        $(".total-number").text("Total score: " + totalScore).addClass('animated rotateInDownLeft');
        $(".gameBanner").removeClass('lose-color win-color');
    }

    // Function to remove animtion class for reuse on click
    function resetAnimation() {
        $("#win-display").removeClass('animated bounceInDown');
        $("#lose-display").removeClass('animated bounceInDown');
        $(".gameBanner").removeClass('animated bounceInDown');
        $(".target-number").removeClass('animated rotateInDownRight');
        $(".total-number").removeClass('animated rotateInDownLeft');
    }


    // Display target number & total score
    $(".target-number").text("Target number: " + targetNumber);
    $(".total-number").text("Total score: " + totalScore);
    $("#win-display").text("Wins:     " + winCount);
    $("#lose-display").text("Losses: " + lossCount);

    // On clicks, evaluate game
    $(".col").on("click", ".panda", function(){
        totalScore += pandaNumber;
        $(".total-number").text("Total score: " + totalScore);
        checkWin();
    });
    $(".col").on("click", ".wolf", function(){
        totalScore += wolfNumber;
        $(".total-number").text("Total score: " + totalScore);
        checkWin();

    });
    $(".col").on("click", ".deer", function(){
        totalScore += deerNumber;
        $(".total-number").text("Total score: " + totalScore);
        checkWin();
    });
    $(".col").on("click", ".bee", function(){
        totalScore += beeNumber;
        $(".total-number").text("Total score: " + totalScore);
        checkWin();
    });
}); 
    </script>





    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
</body>
</html>